<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Baseball Fields</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 flex justify-center items-center min-h-screen p-4">
    <div class="flex space-x-4">
        <div class="relative w-[500px] h-[500px]">
            <canvas id="baseballField1" width="500" height="500" class="absolute inset-0 bg-green-600 border-4 border-gray-500"></canvas>
            <div id="draggable1-1" class="absolute w-6 h-6 bg-red-500 rounded-full cursor-move" draggable="true" style="top: 50px; left: 50px;"></div>
            <div id="draggable1-2" class="absolute w-6 h-6 bg-red-500 rounded-full cursor-move" draggable="true" style="top: 100px; left: 100px;"></div>
            <div id="draggable1-3" class="absolute w-6 h-6 bg-red-500 rounded-full cursor-move" draggable="true" style="top: 150px; left: 150px;"></div>
            <div id="draggable1-4" class="absolute w-6 h-6 bg-red-500 rounded-full cursor-move" draggable="true" style="top: 200px; left: 200px;"></div>
        </div>
        
        <div class="relative w-[500px] h-[500px]">
            <canvas id="baseballField2" width="500" height="500" class="absolute inset-0 bg-green-600 border-4 border-gray-500"></canvas>
            <div id="draggable2-1" class="absolute w-6 h-6 bg-red-500 rounded-full cursor-move" draggable="true" style="top: 50px; left: 50px;"></div>
            <div id="draggable2-2" class="absolute w-6 h-6 bg-red-500 rounded-full cursor-move" draggable="true" style="top: 100px; left: 100px;"></div>
            <div id="draggable2-3" class="absolute w-6 h-6 bg-red-500 rounded-full cursor-move" draggable="true" style="top: 150px; left: 150px;"></div>
            <div id="draggable2-4" class="absolute w-6 h-6 bg-red-500 rounded-full cursor-move" draggable="true" style="top: 200px; left: 200px;"></div>
        </div>
    </div>

    <script>
        function setupBaseballField(canvasId, draggablePrefix) {
            const canvas = document.getElementById(canvasId);
            const ctx = canvas.getContext('2d');

            const centerX = 250;
            const centerY = 400;
            const basePathLength = 80;
            const outfieldRadius = 250;
            const largeOutfieldRadius = 350;
            const largeInfieldRadius = 200;

            function drawField() {
                // Background green
                ctx.fillStyle = 'green';
                ctx.fillRect(0, 0, canvas.width, canvas.height);

                // Outfield arc
                ctx.save();
                ctx.translate(centerX, centerY);
                ctx.rotate(45 * Math.PI / 180);
                ctx.beginPath();
                ctx.arc(0, 0, largeOutfieldRadius, Math.PI, Math.PI * 1.5);
                ctx.strokeStyle = 'white';
                ctx.lineWidth = 3;
                ctx.stroke();
                ctx.closePath();
                ctx.restore();

                // Infield
                ctx.save();
                ctx.translate(centerX, centerY);
                ctx.rotate(45 * Math.PI / 180);
                ctx.beginPath();
                ctx.arc(0, 0, largeInfieldRadius, Math.PI, Math.PI * 1.5);
                ctx.lineTo(0, 0);
                ctx.fillStyle = '#D2B48C';
                ctx.fill();
                ctx.lineWidth = 3;
                ctx.strokeStyle = 'white';
                ctx.stroke();
                ctx.closePath();
                ctx.restore();

                // Base paths
                ctx.beginPath();
                ctx.moveTo(centerX, centerY);
                ctx.lineTo(centerX - basePathLength, centerY - basePathLength);
                ctx.lineTo(centerX, centerY - 2 * basePathLength);
                ctx.lineTo(centerX + basePathLength, centerY - basePathLength);
                ctx.lineTo(centerX, centerY);
                ctx.strokeStyle = 'white';
                ctx.lineWidth = 2;
                ctx.stroke();
                ctx.closePath();

                // Home plate
                ctx.beginPath();
                ctx.moveTo(centerX - 5, centerY);
                ctx.lineTo(centerX + 5, centerY);
                ctx.lineTo(centerX + 7, centerY - 5);
                ctx.lineTo(centerX, centerY - 10);
                ctx.lineTo(centerX - 7, centerY - 5);
                ctx.closePath();
                ctx.fillStyle = 'white';
                ctx.fill();
                ctx.strokeStyle = 'black';
                ctx.lineWidth = 2;
                ctx.stroke();

                // Bases
                function drawBase(x, y) {
                    ctx.beginPath();
                    ctx.moveTo(x - 5, y - 5);
                    ctx.lineTo(x + 5, y - 5);
                    ctx.lineTo(x + 5, y + 5);
                    ctx.lineTo(x - 5, y + 5);
                    ctx.closePath();
                    ctx.fillStyle = 'white';
                    ctx.fill();
                    ctx.strokeStyle = 'black';
                    ctx.lineWidth = 2;
                    ctx.stroke();
                }

                drawBase(centerX - basePathLength, centerY - basePathLength);
                drawBase(centerX, centerY - 2 * basePathLength);
                drawBase(centerX + basePathLength, centerY - basePathLength);
            }

            drawField();

            // Dragging logic (same as before)
            const draggableSquares = document.querySelectorAll(`[id^="${draggablePrefix}"]`);
            let draggedSquare = null;

            draggableSquares.forEach(square => {
                square.addEventListener('dragstart', dragStart);
                square.addEventListener('dragend', dragEnd);
            });

            function dragStart(e) {
                draggedSquare = e.target;
                setTimeout(() => {
                    draggedSquare.classList.add('opacity-50');
                }, 0);
            }

            function dragEnd() {
                draggedSquare.classList.remove('opacity-50');
                draggedSquare = null;
            }

            canvas.addEventListener('dragover', function (e) {
                e.preventDefault();
            });

            canvas.addEventListener('drop', function (e) {
                e.preventDefault();
                if (draggedSquare) {
                    const rect = canvas.getBoundingClientRect();
                    const x = e.clientX - rect.left;
                    const y = e.clientY - rect.top;
                    draggedSquare.style.left = `${x - 15}px`;
                    draggedSquare.style.top = `${y - 15}px`;
                }
            });
        }

        // Setup both baseball fields
        setupBaseballField('baseballField1', 'draggable1');
        setupBaseballField('baseballField2', 'draggable2');
    </script>
</body>
</html>